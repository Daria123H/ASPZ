# Налаштування

Docker — це інструмент, який допомагає запускати програми в спеціальних контейнерах. Мета цієї практичної було дослідити та проексперементувати з обмеженнями ресурсів у середовищі Docker. Я маю на увазі освоїти ліміт відкритих файлів, встановлення лімітів процесів та файлів, використання утиліти perf, обмеження на максимальний розмір файлу, часу та інше. В моїй ситуації в мене встановлено FreeBSD на якій я не могу встановити середовище докер бо він працює з лінуксом та не втає на FreeBSD тому я знайшла альтернативу докеру це jail. Це як середовище як процесів в FreeBSD. Але перед тим як працювати з цим середовищем треба його встановити та налаштувати. Спочатку я встановила пакет

            pkg install ezjail

Далі налаштувала систему для роботи з rctl та sysctl. Далі створила файл з конфігурацією jail «jail.conf». Далі прописала команди для системи для роботи jail

            sysrc jail_enable="YES"

            sysrc jail_list="testjail"

Далі перезапустила сервіс jail та запустила його за допомогою цієї команди

            service ezjail start

далі перевірила що він дійсно працює

            jls

потім увімкнула наступну команду щоб увійти в jail

            jexec testjail /bin/sh.

Додатково створила директорії для jail 

            mkdir -p /usr/jails/testjail

і скопіювала в них базові файли системи

            tar -xvpf /usr/freebsd-dist/base.txz -C /usr/jails/testjail

            tar -xvpf /usr/freebsd-dist/kernel.txz -C /usr/jails/testjail.

# Завдання 3.1

Запустіть Docker-контейнер і поекспериментуйте з максимальним лімітом ресурсів відкритих файлів. Для цього виконайте команди у вказаному порядку:

      $ ulimit -n
      $ ulimit -aS | grep "open files"
      $ ulimit -aH | grep "open files"
      $ ulimit -n 3000
      $ ulimit -aS | grep "open files"
      $ ulimit -aH | grep "open files"
      $ ulimit -n 3001
      $ ulimit -n 2000
      $ ulimit -n
      $ ulimit -aS | grep "open files"
      $ ulimit -aH | grep "open files"
      $ ulimit -n 3000

Як наступне вправу, повторіть перераховані команди з root-правами.

## Виконання

За допомогою середовища jail я виконала завдання на обмеження кількості відкритих файлів. По черзі прописала всі запропоновані команди суть яких змінювати ліміт і перевіряти що вони дійсно змінюються. На рахунок root прав я спочатку заходила в root, а потім вже в jail, тобто я вже знаходилась в root. 

### Результат

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr3/task1/PR3_1.png)

# Завдання 3.2

У Docker-контейнері встановіть утиліту perf(1). Поекспериментуйте з досягненням процесом встановленого ліміту.

## Виконання

За цим завданням потрібно було встановити утиліту perf, але так як вона відсутня у FreeBSD замість неї я використала альтернативний спосіб моніторингу. Перше це провела аналіз навантаження на CPU у реальному часі далі встановила оновлення кожну секунду після цього запустила команду vmstat 1

Щоб подивитись загальне навантаження системи. Потім перевірила, які ліміти процесів встановлено в системі: 

            ulimit -a
            
![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr3/task2/Pr32_1.png)

            ulimit -t

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr3/task2/PR32_2.png)

Далі проаналізувала процеси які споживають найбільше ресурсів. 

            ps aux | sort -nrk 3 | head -10
            
![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr3/task2/Pr32_3.png)

Далі запустила навантажувальний тест, щоб подивитись як змінюватимуться ресурси. 

            yes > /dev/null &

яка запускає нескінченний процес завантаження CPU

Після запуску виконала команду 

            vmstat 1

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr3/task2/Pr32_4.png)

щоб подивитися, як змінюються показники. 
