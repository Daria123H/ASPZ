# Завдання 6.21

Напишіть короткий звіт (до 1 сторінки): “Valgrind vs ASan — що краще для великих програм? Для CI/CD? Для роботи з Docker?” 

## Виконання

Valgrind - це програма, яка запускає програму під моїм наглядом. Вона перевіряє, чи є витоки пам’яті або помилки доступу.

ASan- це вбудований у компілятор інструмент (як частина GCC або Clang), який додає додаткові перевірки прямо в код під час компіляції. 

### Для великих програм

[Пишемо код](https://github.com/Daria123H/ASPZ/blob/main/Pr6/PR6_11.c), який буде виконувати операції з виділенням і звільненням пам'яті, але мати помилку, яка призводитиме до виходу за межі виділеного масиву. 

#### ASan компіляція (Clang):

    clang -fsanitize=address -g PR6_11.c -o PR6_11

    ./big

## Результат

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr6/PR6_11Asan.png)

#### Valgrind запуск:

    cc PR6_11.c -o PR6_11

    valgrind ./ PR6_11

## Результат

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr6/PR6_11Va.png)

Valgrind працює дуже повільно, тому якщо у мене великий проєкт, тестування займе багато часу. Але його не потрібно компілювати з якимись особливими опціями, просто треба запустити програму.

ASan працює набагато швидше, і краще підходить для великих програм, які треба перевіряти регулярно. Але її потрібно скомпілювати з опцією -fsanitize=address.

Висновок: для великих програм краще ASan — швидше і легше інтегрується.

#### Для CI/CD

[Пишемо код](https://github.com/Daria123H/ASPZ/blob/main/Pr6/PR6_12.c),що виділяє пам'ять для одного цілого числа, звільняє її, а потім намагається записати значення в уже звільнену пам'ять.

#### ASan компіляція:

    clang -fsanitize=address -g ci.c -o ci

    ./ci

## Результат

![Результат](https://github.com/Daria123H/ASPZ/blob/main/Pr6/PR6_12.png)

Valgrind може бути занадто повільним. Також він дає дуже детальні звіти, але довго працює.

ASan легко вбудовується в CI, треба просто додати опцію компілятора, і як результат детальні звіти про помилки.

Висновок: У CI/CD найкращий варіант — ASan.

### Для роботи з Docker



Valgrind не завжди добре працює в контейнерах, бо потребує доступу до low-level системних ресурсів (ptrace, mmap тощо), які можуть бути обмежені в Docker.
ASan працює краще, але потрібно зібрати програму прямо в контейнері, або переконатися, що всі залежності правильно лінковані.
Висновок: ASan знову кращий, але потребує ретельної підготовки Docker-образу.



